var Vue = require('vue')
var VueResource = require('vue-resource')
var config = require('app_config')
var router = require('app_routing')

// install REST API vue plugin
Vue.use(VueResource)

Vue.http.interceptors.push(function (request, next) {
  next(function (response) {
    // handle 401 errors properly
    if (response.status === 401) {
      router.go({ name: 'login' })
    }
  })
})

module.exports = {
  API_ROOT: config.API_ROOT,
  http: Vue.http,
  beers: Vue.resource(config.API_ROOT + 'beers')
}
